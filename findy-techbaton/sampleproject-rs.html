<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Rustã§ä½œã‚‹Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ sampleproject-rs ã®ç´¹ä»‹</title>
    <link rel="stylesheet" type="text/css" href="../_static/revealjs/dist/reveal.css?v=d4488b42" />
    <link rel="stylesheet" href="../_static/revealjs/dist/theme/black.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/revealjs/plugin/highlight/zenburn.css?v=83d5745d" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/common.css?v=b04cc698" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-revealjs/css/footnotes.css?v=c46a0db2" />
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ftnext">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ftnext.github.io/2025-slides/findy-techbaton/sampleproject-rs.html">
    <meta property="og:title" content="Rustã§ä½œã‚‹Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ sampleproject-rs ã®ç´¹ä»‹">
    <meta property="og:description" content="Pythonã®å¤šæ§˜æ€§ æ·±æ˜ã‚ŠLT Night">
    <meta property="og:image" content="https://ftnext.github.io/2025-slides/_static/ogps/findy-techbaton-python.png">

  </head><body>
    <div class="reveal">
        <div class="slides" role="main">
            <section>
<section>
<h1 style="word-break: keep-all; overflow-wrap: break-word;">Rustã§ä½œã‚‹Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ sampleproject-rs ã®ç´¹ä»‹</h1>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">Rustã§ä½œã‚‹Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ <strong>sampleproject-rs</strong> ã®ç´¹ä»‹</h2>
<dl class="field-list simple">
<dt class="field-odd">Event<span class="colon">:</span></dt>
<dd class="field-odd"><p>Pythonã®å¤šæ§˜æ€§ æ·±æ˜ã‚ŠLT Night</p>
</dd>
<dt class="field-even">Presented<span class="colon">:</span></dt>
<dd class="field-even"><p>2025/10/22 nikkie</p>
</dd>
</dl>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ãŠå‰ã€èª°ã‚ˆï¼Ÿ</h2>
<ul class="simple">
<li><p>nikkieï¼ˆã«ã£ããƒ¼ï¼‰ <span class="fab fa-twitter"></span> <span class="fab fa-github"></span> @ftnext</p></li>
<li><p>PyCon JP 2025 ã§ã¯ <a class="reference external" href="https://2025.pycon.jp/en/timetable/talk/Z8ZYFA" rel="noreferrer" target="_blank">æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªloggingã®è©±</a> ã‚’ã—ã¾ã—ãŸ</p></li>
<li><p>æ©Ÿæ¢°å­¦ç¿’ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚ <a class="reference external" href="https://www.uzabase.com/jp/info/20250901/" rel="noreferrer" target="_blank">Speeda AI Agent</a> é–‹ç™ºï¼ˆ<a class="reference external" href="https://hrmos.co/pages/uzabase/jobs/1829077236709650481" rel="noreferrer" target="_blank">We're hiring!</a>ï¼‰</p></li>
</ul>
<img alt="../_images/uzabase-white-logo.png" src="../_images/uzabase-white-logo.png"/>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">å®£ä¼ï¼ˆé‹å–¶ã«é–¢ã‚ã£ã¦ã„ã‚‹ã‚‚ã®ï¼‰</h3>
<ul>
<li><p>æ¯æœˆãã‚‰ã„ã§é–‹å‚¬ä¸­ã€ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼šï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³é–‹å‚¬ï¼‰</p>
<blockquote>
<div><ul class="simple">
<li><p>10æœˆã¯æ˜æ—¥23æ—¥(æœ¨) <a class="reference external" href="https://startpython.connpass.com/event/371646/" rel="noreferrer" target="_blank">https://startpython.connpass.com/event/371646/</a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>10/30(æœ¨)31(é‡‘) <a class="reference external" href="https://aid.connpass.com/event/367697/" rel="noreferrer" target="_blank">AIé§†å‹•é–‹ç™ºã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ 2025ç§‹</a>ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ ã‚ã‚Šã¾ã™ï¼</p></li>
</ul>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">Rustã§æ›¸ã‹ã‚ŒãŸPythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ <strong>ä½œã‚Œã‚‹</strong> ã‚ˆã†ã«ãªã‚ŠãŸã„</h2>
<dl class="field-list simple">
<dt class="field-odd">uv, Ruff<span class="colon">:</span></dt>
<dd class="field-odd"><p>Rustã‚’ãƒã‚¤ãƒŠãƒªã«ã—ã¦PyPIã§é…å¸ƒ</p>
</dd>
<dt class="field-even">Pydantic<span class="colon">:</span></dt>
<dd class="field-even"><p>Rustã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’Pythonã‹ã‚‰å‘¼ã³å‡ºã›ã‚‹</p>
</dd>
</dl>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ç›®æ¨™ã«è¿‘ã¥ããŸã‚ã« sampleproject-rs ã§ç´ æŒ¯ã‚ŠğŸ’ª</h3>
<p><a class="reference external" href="https://pypi.org/project/sampleproject-rs/" rel="noreferrer" target="_blank">https://pypi.org/project/sampleproject-rs/</a></p>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">sampleprojectã€çŸ¥ã£ã¦ã„ã‚‹æ–¹ï¼ŸğŸ™‹</h2>
<p><a class="reference external" href="https://pypi.org/project/sampleproject/" rel="noreferrer" target="_blank">https://pypi.org/project/sampleproject/</a></p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">â˜ï¸ <strong class="command">uvx --from sampleproject sample</strong></h3>
<pre data-id="uvx-from-sampleproject-sample"><code class="console" data-noescape="" data-trim="">% uvx --from sampleproject sample
Call your main application code here</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">âœŒï¸ <code class="docutils literal notranslate"><span class="pre">sample.simple.add_one()</span></code></h3>
<pre data-id="sample-simple-add-one"><code class="console" data-noescape="" data-trim="">% uv run --with sampleproject \
    python -c "from sample import simple; print(simple.add_one(1))"
2</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Python <strong>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚µãƒ³ãƒ—ãƒ«</strong></h3>
<ul class="simple">
<li><p>PyPAï¼ˆPython Packaging Authorityï¼‰ãŒä½œã£ã¦ã¾ã™ï¼š<a class="reference external" href="https://github.com/pypa/sampleproject/" rel="noreferrer" target="_blank">https://github.com/pypa/sampleproject/</a></p></li>
<li><p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« <a class="reference external" href="https://packaging.python.org/en/latest/tutorials/packaging-projects/" rel="noreferrer" target="_blank">Packaging Python Projects</a></p></li>
<li><p>Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚ŠãŸã„æ–¹ã«ãŠã™ã™ã‚</p></li>
</ul>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ç§ã®sampleproject-rs</h2>
<p>sampleprojectã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚Œã€çˆ†èª•ã•ã›ãŸ</p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">â˜ï¸ <strong class="command">uvx --from sampleproject-rs sample</strong></h3>
<pre data-id="uvx-from-sampleproject-rs-sample"><code class="console" data-noescape="" data-trim="">% uvx --from sampleproject-rs sample
Call your main application code here</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">âœŒï¸ <code class="docutils literal notranslate"><span class="pre">sample.simple.add_one()</span></code></h3>
<pre data-id="id5"><code class="console" data-noescape="" data-trim="">% uv run --with sampleproject-rs \
    python -c "from sample import simple; print(simple.add_one(1))"
2</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;"><strong>Rustå®Ÿè£…</strong> ã§å®Œå…¨å†ç¾ã§ã™ï¼ï¼</h3>
<p><a class="reference external" href="https://github.com/ftnext/sampleproject-rs" rel="noreferrer" target="_blank">https://github.com/ftnext/sampleproject-rs</a></p>
<pre data-id="rust"><code class="rust" data-noescape="" data-trim="">fn main() {
    println!("Call your main application code here");
}

#[pyfunction]
fn add_one(number: i32) -&gt; i32 {
    number + 1
}</code></pre>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">sampleproject-rs ã‹ã‚‰ã®å­¦ã³</h2>
<ul class="simple">
<li><p><em>maturin</em></p></li>
<li><p><em>PyO3</em></p></li>
</ul>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">1ï¸âƒ£ <strong class="command">maturin build</strong> ã§Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãªã‚‹ <a class="footnote-reference brackets" href="#maturin-first-blog" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></h2>
<ul class="simple">
<li><p>maturinã¯ã€Rustã§æ›¸ã‹ã‚ŒãŸãƒ“ãƒ«ãƒ‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text"><code class="file docutils literal notranslate"><span class="pre">pyproject.toml</span></code></span></div>
<pre><code class="toml" data-noescape="" data-trim="">[build-system]
requires = ["maturin&gt;=1.8,&lt;2.0"]
build-backend = "maturin"

[tool.maturin]
bindings = "bin"  # ãƒã‚¤ãƒŠãƒªã®æŒ‡å®š
strip = true</code></pre>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="maturin-first-blog" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id7" role="doc-backlink">1</a><span class="fn-bracket">]</span></span>
<p>æ‹™ãƒ–ãƒ­ã‚° <a class="reference external" href="https://nikkie-ftnext.hatenablog.com/entry/maturin-bindings-bin-python-package-from-rust-binary" rel="noreferrer" target="_blank">Rustãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰ä½œã£ãŸãƒã‚¤ãƒŠãƒªã¯ã€maturinã§Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã§ãã‚‹ï¼ï¼</a></p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Rustã«ã‚ˆã‚‹ãƒã‚¤ãƒŠãƒªãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«</h3>
<pre data-id="id8"><code class="console" data-noescape="" data-trim="">% # git checkout 0.1.0
% cargo run --quiet
Call your main application code here
% file target/debug/sample
target/debug/sample: Mach-O 64-bit executable arm64
% target/debug/sample
Call your main application code here</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Pythonè£½ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨é•ã£ã¦ <strong>ç’°å¢ƒã”ã¨ã®ãƒ“ãƒ«ãƒ‰</strong> ãŒå¿…è¦ <a class="footnote-reference brackets" href="#maturin-impression" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></h3>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="maturin-impression" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id9" role="doc-backlink">2</a><span class="fn-bracket">]</span></span>
<p>æ‹™ãƒ–ãƒ­ã‚° <a class="reference external" href="https://nikkie-ftnext.hatenablog.com/entry/try-maturin-pypi-upload-confuse-binary-each-environment" rel="noreferrer" target="_blank">Rust ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰ä½œã£ãŸãƒã‚¤ãƒŠãƒªã‚’ PyPI ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã¦</a></p>
</aside>
</aside>
<ul class="simple">
<li><p>GitHub Actionsï¼ˆUbuntuç’°å¢ƒï¼‰ã§ <code class="docutils literal notranslate"><span class="pre">maturin</span> <span class="pre">build</span></code> ã—ã¦PyPIã«ä¸Šã’ãŸã‚‰ã€<strong>macOSã§ã¯å®Ÿè¡Œã§ããš</strong></p></li>
</ul>
<pre data-id="id10"><code class="console" data-noescape="" data-trim="">% uvx --from sampleproject-rs sample
Ã— No solution found when resolving tool dependencies:
â•°â”€â–¶ Because only sampleproject-rs==0.0.1 is available and
    sampleproject-rs==0.0.1 has no wheels with a matching platform tag
    (e.g., `macosx_14_0_arm64`), we can conclude that all versions of
    sampleproject-rs cannot be used.</code></pre>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">2ï¸âƒ£ <strong>PyO3</strong> ã§Rustãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’Pythonã‹ã‚‰å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã—ãŸ</h2>
<pre data-id="pyo3-rustpython"><code class="rust" data-noescape="" data-trim="">use pyo3::prelude::*;

#[pyfunction]
fn add_one(number: i32) -&gt; i32 {
    number + 1
}

#[pymodule]
mod sample {
    use super::*;

    #[pymodule]
    mod simple {
        #[pymodule_export]
        use super::add_one;
    }
}</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">åˆã‚ã›ã¦ <code class="docutils literal notranslate"><span class="pre">sample</span></code> ã‚³ãƒãƒ³ãƒ‰ã¯Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å¤‰æ›´ <a class="footnote-reference brackets" href="#pyo3-first-blog" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></h3>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="pyo3-first-blog" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id11" role="doc-backlink">3</a><span class="fn-bracket">]</span></span>
<p>æ‹™ãƒ–ãƒ­ã‚° <a class="reference external" href="https://nikkie-ftnext.hatenablog.com/entry/rust-maturin-cli-and-import-support-python-library" rel="noreferrer" target="_blank">Rust ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰ä½œã£ãŸ Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã€ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ import ã‚‚ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã«ã¯</a></p>
</aside>
</aside>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text"><code class="file docutils literal notranslate"><span class="pre">pyproject.toml</span></code></span></div>
<pre><code class="toml" data-noescape="" data-trim="">[project.scripts]
sample = "sample:main"

[tool.maturin]
bindings = "pyo3"  # "bin"ã‹ã‚‰å¤‰æ›´</code></pre>
</div>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ã¾ã¨ã‚ğŸŒ¯ï¼šRustã§ä½œã‚‹Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ sampleproject-rs ã®ç´¹ä»‹</h2>
<p>Rustã§æ›¸ã„ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯</p>
<ul class="simple">
<li><p><strong>maturin</strong> ã§ãƒã‚¤ãƒŠãƒªã¨ã—ã¦PyPIã‹ã‚‰é…å¸ƒã§ãã‚‹</p></li>
<li><p><strong>PyO3</strong> ã§Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¸­ã§å‘¼ã³å‡ºã›ã‚‹</p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</h3>
<p>Happy Python developmentğŸ«¶</p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Appendixï¼šé–¢é€£ç™ºè¡¨ <a class="footnote-reference brackets" href="#pyfukuoka4" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></h3>
<iframe height="480" src="https://ftnext.github.io/2025-slides/python-fukuoka/why-we-can-run-rust-package-cli#/1" title="Rustè£½ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰å®Ÿè¡Œã§ãã‚‹ã®ã¯ã€ãªãœï¼Ÿ" width="800"></iframe><aside class="footnote-list brackets">
<aside class="footnote brackets" id="pyfukuoka4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id14" role="doc-backlink">4</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://youtu.be/9P8Cq63S1eM?si=qMZBYxiCTyAVTdYw&amp;t=3967" rel="noreferrer" target="_blank">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‹•ç”»</a></p>
</aside>
</aside>
</section>
</section>

        </div>
    </div>
    
    <script src="../_static/revealjs/dist/reveal.js"></script>
    
    
      <script src="../_static/revealjs/plugin/highlight/highlight.js"></script>
      <script src="../_static/revealjs/plugin/notes/notes.js"></script>
      <script src="../_static/revealjs/plugin/copycode/copycode.js"></script>
      
    
    <script>
        var revealjsConfig = new Object();
        Object.assign(revealjsConfig, {"controls": true, "progress": true, "history": true, "center": true, "transition": "none", "slideNumber": "c/t", "scrollActivationWidth": null});
        
        
        
          revealjsConfig.plugins = [
            RevealHighlight,RevealNotes,CopyCode,
          ];
        
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize(revealjsConfig);
    </script>

  </body>
</html>