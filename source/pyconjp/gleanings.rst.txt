Chapter 5: è½ç©‚æ‹¾ã„
======================================================================

1. æœ€çµ‚æ‰‹æ®µãƒãƒ³ãƒ‰ãƒ©
2. è¨­å®šæ–¹æ³•ã®é¸æŠè‚¢ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã®è¨­å®šå«ã‚€ï¼‰
3. æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª logging ä»¥å¤–ã®é¸æŠè‚¢ï¼ˆloguruãªã©ï¼‰

1ï¸âƒ£ æœ€çµ‚æ‰‹æ®µãƒãƒ³ãƒ‰ãƒ©
======================================================================

.. literalinclude:: ../../samplecode/python-logging/last_resort_example/mylib.py
    :language: python
    :lines: 1-6,8
    :caption: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§warningã®ãƒ­ã‚®ãƒ³ã‚°

``basicConfig()`` ãªã—ã§ãƒ­ã‚®ãƒ³ã‚°ã§ãã¾ã™
--------------------------------------------------

.. literalinclude:: ../../samplecode/python-logging/last_resort_example/app.py
    :language: python
    :caption: ãƒ«ãƒ¼ãƒˆãƒ­ã‚¬ãƒ¼ã‚’è¨­å®šã—ãªã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰

.. code-block:: txt

    ã¡ã‚‡ã£ã¨ãƒ¤ãƒã„ã‚ˆ

ãƒ­ã‚¬ãƒ¼ã«ãƒãƒ³ãƒ‰ãƒ©ã‚’æŒ‡å®šã—ãªã„ã¨ã
--------------------------------------------------

    ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ ``lastResort`` ã«æ ¼ç´ã•ã‚ŒãŸã€Œæœ€çµ‚æ‰‹æ®µãƒãƒ³ãƒ‰ãƒ©ã€ã‚’ä½¿ç”¨ã—ã¦å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

`ç’°å¢ƒè¨­å®šãŒä¸ãˆã‚‰ã‚Œãªã„ã¨ã©ã†ãªã‚‹ã‹ <https://docs.python.org/ja/3/howto/logging.html#what-happens-if-no-configuration-is-provided>`__

æœ€çµ‚æ‰‹æ®µãƒãƒ³ãƒ‰ãƒ©ã‚’ä½¿ã‚ãªã„ãªã‚‰ ``NullHandler``
--------------------------------------------------

    ä½•ã‚‰ã‹ã®ç†ç”±ã§ãƒ­ã‚®ãƒ³ã‚°è¨­å®šãŒãªã•ã‚Œã¦ã„ãªã„ã¨ãã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º *ã•ã›ãŸããªã„* ã®ã§ã‚ã‚Œã°ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ­ã‚¬ãƒ¼ã«ä½•ã‚‚ã—ãªã„ãƒãƒ³ãƒ‰ãƒ©ã‚’å–ã‚Šä»˜ã‘ã‚‰ã‚Œã¾ã™ã€‚

`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãŸã‚ã®ãƒ­ã‚®ãƒ³ã‚°ã®è¨­å®š <https://docs.python.org/ja/3/howto/logging.html#configuring-logging-for-a-library>`__

``NullHandler`` ä»¥å¤–ã‚’å–ã‚Šä»˜ã‘ã¦ã¯ã„ã‘ã¾ã›ã‚“ğŸ™…â€â™‚ï¸
--------------------------------------------------

* ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ­ã‚¬ãƒ¼ã®ãƒãƒ³ãƒ‰ãƒ©ã§å‡ºåŠ›
* è¦ªã®ãƒ«ãƒ¼ãƒˆãƒ­ã‚¬ãƒ¼ã«ä¼æ’­ï¼ˆpropagateï¼‰ã—ã€ ãƒ«ãƒ¼ãƒˆãƒ­ã‚¬ãƒ¼ã®ãƒãƒ³ãƒ‰ãƒ©ã§ã‚‚å‡¦ç†ã—ã¦ **2é‡** å‡ºåŠ›

2ï¸âƒ£ è¨­å®šæ–¹æ³•ã®é¸æŠè‚¢
======================================================================

.. literalinclude:: ../../samplecode/python-logging/library_logger/root_logging_hard.py
    :language: python
    :lines: 13-22

.. _dictConfig: https://docs.python.org/ja/3/library/logging.config.html#logging.config.dictConfig

`dictConfig`_
--------------------------------------------------

.. literalinclude:: ../../samplecode/python-logging/library_logger/root_logging_dictconfig.py
    :language: python
    :lines: 8,13-39

.. _fileConfig: https://docs.python.org/ja/3/library/logging.config.html#logging.config.fileConfig

ã‚³ãƒ¼ãƒ‰ã®ä»£ã‚ã‚Šã« `fileConfig`_
--------------------------------------------------

* `configparser <https://docs.python.org/ja/3/library/configparser.html>`__ å½¢å¼ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®š

    ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ [loggers], [handlers], [formatters] ã¨ã„ã£ãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå…¥ã£ã¦ã„ãªã‘ã‚Œã°ãªã‚‰ãšã€ï¼ˆ`ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸å¼ <https://docs.python.org/ja/3/library/logging.config.html#configuration-file-format>`__ï¼‰

YAMLãƒ•ã‚¡ã‚¤ãƒ« + ``dictConfig``
--------------------------------------------------

.. literalinclude:: ../../samplecode/python-logging/library_logger/root_logging_yamlconfig.py
    :language: python
    :lines: 16-19

.. https://nikkie-ftnext.hatenablog.com/entry/configure-python-librarys-logger-logging-config-dict-or-yaml

3ï¸âƒ£ æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª logging ä»¥å¤–ã®é¸æŠè‚¢
======================================================================

* `vinta/awesome-pythonã®Logging <https://github.com/vinta/awesome-python?tab=readme-ov-file#logging>`__ ã«ãƒªã‚¹ãƒˆ
* loguru
* structlog

.. _loguru: https://github.com/Delgan/loguru

`loguru`_
--------------------------------------------------

    Python logging made (stupidly) simple

* IMOï¼šsimple ã¨ã„ã†ã‚ˆã‚Š easy å¿—å‘
* `äº’æ›ã§ã¯ã‚ã‚‹ <https://github.com/Delgan/loguru/tree/0.7.3?tab=readme-ov-file#entirely-compatible-with-standard-logging>`_ ãŒã€å·®ã—æ›¿ãˆã‚‹ã®ãŒå¤§å¤‰ã¨ã„ã†æ„Ÿè§¦

.. _structlog: https://github.com/hynek/structlog

`structlog`_
--------------------------------------------------

    Simple, powerful, and fast logging for Python.

* æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª logging ã‹ã‚‰ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ãŒã€`äº’æ›ã§ã‚‚ã‚ã‚‹ <https://www.structlog.org/en/stable/standard-library.html#suggested-configurations>`__
* PyCon JP 2024ã€Œ`å®Ÿè·µstructlog <https://2024.pycon.jp/en/talk/RRRAAT>`__ã€

.. One more thing ã¨ã—ã¦ python-happy-logging ã‚’
